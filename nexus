  Nexus Installation Script (install-nexus.sh)
#!/bin/bash
# =========================================
# Nexus 3 Installation Script for Amazon Linux 2023
# =========================================

# Exit on any error
set -e

echo "🚀 Updating system and installing dependencies..."
sudo yum update -y
sudo yum install -y wget tar unzip

echo "☕ Installing Java 17 (Amazon Corretto)..."
sudo yum install -y java-17-amazon-corretto-devel
java -version

echo "📁 Creating directories and downloading Nexus..."
sudo mkdir -p /app && cd /app

# Download a tested Nexus version
NEXUS_VERSION="3.91.0-01"
NEXUS_FILE="nexus-${NEXUS_VERSION}-unix.tar.gz"
NEXUS_URL="https://download.sonatype.com/nexus/3/${NEXUS_FILE}"

sudo wget $NEXUS_URL -O nexus.tar.gz

echo "📦 Extracting Nexus..."
sudo tar -xvzf nexus.tar.gz
sudo mv nexus-3* nexus

echo "👤 Creating nexus user and setting ownership..."
sudo adduser --system --no-create-home nexus || true
sudo chown -R nexus:nexus /app/nexus
sudo mkdir -p /app/sonatype-work
sudo chown -R nexus:nexus /app/sonatype-work

echo "⚙️ Configuring Nexus to run as 'nexus' user..."
echo 'run_as_user="nexus"' | sudo tee /app/nexus/bin/nexus.rc

echo "📄 Creating systemd service for Nexus..."
sudo tee /etc/systemd/system/nexus.service > /dev/null << 'EOF'
[Unit]
Description=Nexus Repository Manager
After=network.target

[Service]
Type=forking
LimitNOFILE=65536
User=nexus
Group=nexus
ExecStart=/app/nexus/bin/nexus start
ExecStop=/app/nexus/bin/nexus stop
Restart=on-abort

[Install]
WantedBy=multi-user.target
EOF

echo "🔄 Reloading systemd, enabling and starting Nexus..."
sudo systemctl daemon-reload
sudo systemctl enable nexus
sudo systemctl start nexus
sudo systemctl status nexus --no-pager

echo "✅ Nexus should now be running on port 8081"
echo "Access via: http://<YOUR_EC2_PUBLIC_IP>:8081"
echo "Default admin password is located in: /app/sonatype-work/nexus3/admin.password"

How to Use

Save the script:

vi install-nexus.sh
# Paste the script and save


Make it executable:

chmod +x install-nexus.sh


Run it:

sudo ./install-nexus.sh


Check the status:

sudo systemctl status nexus
sudo ss -tulnp | grep 8081


Access Nexus in browser:

http://<EC2-PUBLIC-IP>:8081


Admin password: /app/sonatype-work/nexus3/admin.password
